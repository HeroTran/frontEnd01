"undefined"==typeof RGraph&&(RGraph={isRGraph:!0,type:"common"}),RGraph.InstallWindowMousedownListener=function(){if(!window.__rgraph_mousedown_event_listener_installed__){var func=function(e){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),"function"==typeof window.onmousedown_rgraph&&window.onmousedown_rgraph(e),RGraph.HideTooltip&&RGraph.Registry.Get("chart.tooltip")&&(RGraph.Clear(RGraph.Registry.Get("chart.tooltip").__canvas__),RGraph.Redraw(),RGraph.HideTooltip())};window.addEventListener("mousedown",func,!1),window.__rgraph_mousedown_event_listener_installed__=func}},RGraph.InstallWindowMouseupListener=function(){if(!window.__rgraph_mouseup_event_listener_installed__){var func=function(e){if(navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),RGraph.Annotating_window_onmouseup)return void RGraph.Annotating_window_onmouseup(e);"function"==typeof window.onmouseup_rgraph&&window.onmouseup_rgraph(e),(RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt"))&&RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend"),RGraph.Registry.Set("chart.adjusting",null),RGraph.Registry.Set("chart.adjusting.shape",null),RGraph.Registry.Set("chart.adjusting.gantt",null);for(var tags=document.getElementsByTagName("canvas"),i=0;i<tags.length;++i)if(tags[i].__object__&&tags[i].__object__.isRGraph&&!tags[i].__object__.Get("chart.annotatable"))if(tags[i].__rgraph_trace_cover__||noredraw)var noredraw=!0;else RGraph.Clear(tags[i]);noredraw||RGraph.Redraw()};window.addEventListener("mouseup",func,!1),window.__rgraph_mouseup_event_listener_installed__=func}},RGraph.InstallCanvasMouseupListener=function(obj){if(!obj.canvas.__rgraph_mouseup_event_listener_installed__){var func=function(e){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),"function"==typeof e.target.onmouseup_rgraph&&e.target.onmouseup_rgraph(e);var objects=RGraph.ObjectRegistry.getObjectsByXY(e);if(objects)for(var i=0;i<objects.length;++i){var obj=objects[i],link=(objects[i].id,obj.Get("link"));if("drawing.text"==obj.type&&"string"==typeof link){var link_target=obj.Get("link.target"),link_options=obj.Get("link.options");window.open(link,link_target?link_target:null,link_options)}if(!RGraph.is_null(obj)&&RGraph.Tooltip){var shape=obj.getShape(e);if(shape&&shape.tooltip){var text=shape.tooltip;if(text){var type=shape.object.type;if("line"==type||"rscatter"==type||"scatter"==type&&!obj.Get("chart.boxplot")||"radar"==type)var canvasXY=RGraph.getCanvasXY(obj.canvas),x=canvasXY[0]+shape.x,y=canvasXY[1]+shape.y;else var x=e.pageX,y=e.pageY;return RGraph.Clear(obj.canvas),RGraph.Redraw(),obj.Highlight(shape),RGraph.Registry.Set("chart.tooltip.shape",shape),RGraph.Tooltip(obj,text,x,y,shape.index,e),RGraph.Registry.Get("chart.tooltip")&&(RGraph.Registry.Get("chart.tooltip").__shape__=shape,RGraph.EvaluateCursor(e)),e.cancelBubble=!0,e.stopPropagation(),!1}}}if((RGraph.Registry.Get("chart.adjusting")||RGraph.Registry.Get("chart.adjusting.gantt"))&&RGraph.FireCustomEvent(RGraph.Registry.Get("chart.adjusting"),"onadjustend"),RGraph.Registry.Set("chart.adjusting",null),RGraph.Registry.Set("chart.adjusting.shape",null),RGraph.Registry.Set("chart.adjusting.gantt",null),shape||obj.overChartArea&&obj.overChartArea(e))break}};obj.canvas.addEventListener("mouseup",func,!1),obj.canvas.__rgraph_mouseup_event_listener_installed__=func}},RGraph.InstallCanvasMousemoveListener=function(obj){if(!obj.canvas.__rgraph_mousemove_event_listener_installed__){var func=function(e){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),"function"==typeof e.target.onmousemove_rgraph&&e.target.onmousemove_rgraph(e);var objects=RGraph.ObjectRegistry.getObjectsByXY(e);if(objects&&objects.length)for(var i=0;i<objects.length;++i){{var obj=objects[i];obj.id}if(obj.getShape){var shape=obj.getShape(e),func=obj.Get("chart.events.mousemove");if(!func&&"function"==typeof obj.onmousemove)var func=obj.onmousemove;if(shape){var index="scatter"==shape.object.type?shape.index_adjusted:shape.index;if("object"==typeof obj["$"+index]&&"function"==typeof obj["$"+index].onmousemove)var func2=obj["$"+index].onmousemove}if(!shape||"function"!=typeof func&&"function"!=typeof func2&&"string"!=typeof obj.Get("link")?"string"==typeof obj.Get("chart.events.mousemove.revertto")&&(RGraph.cursor.push("default"),obj.Set("chart.events.mousemove.revertto",null)):(null==obj.Get("chart.events.mousemove.revertto")&&obj.Set("chart.events.mousemove.revertto",e.target.style.cursor),"function"==typeof func&&func(e,shape),"function"==typeof func2&&func2(e,shape)),shape&&(obj.Get("chart.tooltips")&&obj.Get("chart.tooltips")[shape.index]||shape.tooltip)&&("onmousemove"==obj.Get("chart.tooltips.event")||"mousemove"==obj.Get("chart.tooltips.event"))&&(RGraph.is_null(RGraph.Registry.Get("chart.tooltip"))||RGraph.Registry.Get("chart.tooltip").__index__!=shape.index||"number"==typeof shape.dataset&&shape.dataset!=RGraph.Registry.Get("chart.tooltip").__shape__.dataset||obj.uid!=RGraph.Registry.Get("chart.tooltip").__object__.uid))return RGraph.Clear(obj.canvas),RGraph.Redraw(),void obj.canvas.__rgraph_mouseup_event_listener_installed__(e);if(obj&&obj.Get("chart.adjustable")&&obj.Adjusting_mousemove(e),shape||obj.overChartArea&&obj.overChartArea(e))break}}e.target&&e.target.__object__&&e.target.__object__.Get("chart.crosshairs")&&RGraph.DrawCrosshairs(e,e.target.__object__),"function"==typeof InteractiveKey_line_mousemove&&InteractiveKey_line_mousemove(e),"function"==typeof InteractiveKey_pie_mousemove&&InteractiveKey_pie_mousemove(e),e.target.__object__&&e.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousemove&&RGraph.Annotating_canvas_onmousemove(e),RGraph.EvaluateCursor(e)};obj.canvas.addEventListener("mousemove",func,!1),obj.canvas.__rgraph_mousemove_event_listener_installed__=func}},RGraph.InstallCanvasMousedownListener=function(obj){if(!obj.canvas.__rgraph_mousedown_event_listener_installed__){var func=function(e){if(navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),"function"==typeof e.target.onmousedown_rgraph&&e.target.onmousedown_rgraph(e),e.target.__object__&&e.target.__object__.Get("chart.annotatable")&&RGraph.Annotating_canvas_onmousedown)return void RGraph.Annotating_canvas_onmousedown(e);var obj=RGraph.ObjectRegistry.getObjectByXY(e);if(obj){{obj.id}if(obj&&obj.isRGraph&&obj.Get("chart.adjustable")){var obj=RGraph.ObjectRegistry.getObjectByXY(e);if(obj&&obj.isRGraph){switch(obj.type){case"bar":var shape=obj.getShapeByX(e);break;case"gantt":var shape=obj.getShape(e);if(shape){var mouseXY=RGraph.getMouseXY(e);RGraph.Registry.Set("chart.adjusting.gantt",{index:shape.index,object:obj,mousex:mouseXY[0],mousey:mouseXY[1],event_start:obj.data[shape.index][0],event_duration:obj.data[shape.index][1],mode:mouseXY[0]>shape.x+shape.width-5?"resize":"move",shape:shape})}break;case"line":var shape=obj.getShape(e);break;default:var shape=null}RGraph.Registry.Set("chart.adjusting.shape",shape),RGraph.FireCustomEvent(obj,"onadjustbegin"),RGraph.Registry.Set("chart.adjusting",obj),RGraph.Clear(obj.canvas),RGraph.Redraw(),obj.canvas.__rgraph_mousemove_event_listener_installed__(e)}}RGraph.Clear(obj.canvas),RGraph.Redraw()}};obj.canvas.addEventListener("mousedown",func,!1),obj.canvas.__rgraph_mousedown_event_listener_installed__=func}},RGraph.InstallCanvasClickListener=function(obj){if(!obj.canvas.__rgraph_click_event_listener_installed__){var func=function(e){navigator.userAgent.indexOf("Firefox")>=0&&(window.event=e),e=RGraph.FixEventObject(e),"function"==typeof e.target.onclick_rgraph&&e.target.onclick_rgraph(e);for(var objects=RGraph.ObjectRegistry.getObjectsByXY(e),i=0;i<objects.length;++i){var obj=objects[i],shape=(obj.id,obj.getShape(e)),func=obj.Get("chart.events.click");if(func||"function"!=typeof obj.onclick||(func=obj.onclick),shape&&"function"==typeof func)return void func(e,shape);if(shape){var index="scatter"==shape.object.type?shape.index_adjusted:shape.index;if("number"==typeof index&&obj["$"+index]){var func=obj["$"+index].onclick;if("function"==typeof func)return void func(e,shape)}}if(shape||obj.overChartArea&&obj.overChartArea(e))break}};obj.canvas.addEventListener("click",func,!1),obj.canvas.__rgraph_click_event_listener_installed__=func}},RGraph.EvaluateCursor=function(e){for(var mouseXY=RGraph.getMouseXY(e),mouseX=mouseXY[0],mouseY=mouseXY[1],canvas=e.target,objects=RGraph.ObjectRegistry.getObjectsByCanvasID(canvas.id),i=0;i<objects.length;++i)if(objects[i].getShape&&objects[i].getShape(e)||objects[i].overChartArea&&objects[i].overChartArea(e)){var obj=objects[i];obj.id}if(!RGraph.is_null(obj)){if(obj.getShape&&obj.getShape(e)){var shape=obj.getShape(e);if(obj.Get("chart.tooltips")){var text=RGraph.parseTooltipText(obj.Get("chart.tooltips"),shape.index);if(!text&&"scatter"==shape.object.type&&shape.index_adjusted&&(text=RGraph.parseTooltipText(obj.Get("chart.tooltips"),shape.index_adjusted)),text)var pointer=!0}}if(!RGraph.is_null(obj)&&obj.Get("chart.key.interactive"))for(var j=0;j<obj.coords.key.length;++j)if(mouseX>obj.coords.key[j][0]&&mouseX<obj.coords.key[j][0]+obj.coords.key[j][2]&&mouseY>obj.coords.key[j][1]&&mouseY<obj.coords.key[j][1]+obj.coords.key[j][3])var pointer=!0}if(!RGraph.is_null(shape)&&!RGraph.is_null(obj)){if(!RGraph.is_null(obj.Get("chart.events.mousemove"))&&"function"==typeof obj.Get("chart.events.mousemove")){var str=obj.Get("chart.events.mousemove").toString();if(str.match(/pointer/)&&str.match(/cursor/)&&str.match(/style/))var pointer=!0}if(!RGraph.is_null(obj.onmousemove)&&"function"==typeof obj.onmousemove){var str=obj.onmousemove.toString();if(str.match(/pointer/)&&str.match(/cursor/)&&str.match(/style/))var pointer=!0}var index="scatter"==shape.object.type?shape.index_adjusted:shape.index;if(!RGraph.is_null(obj["$"+index])&&"function"==typeof obj["$"+index].onmousemove){var str=obj["$"+index].onmousemove.toString();if(str.match(/pointer/)&&str.match(/cursor/)&&str.match(/style/))var pointer=!0}}for(var objects=RGraph.ObjectRegistry.objects.byCanvasID,i=0;i<objects.length;++i)if(objects[i]&&objects[i][1].Get("chart.resizable"))var resizable=!0;resizable&&mouseX>e.target.width-32&&mouseY>e.target.height-16&&(pointer=!0),e.target.style.cursor=pointer?"pointer":"pointer"==e.target.style.cursor?"default":null,resizable&&mouseX>=e.target.width-15&&mouseY>=e.target.height-15&&(e.target.style.cursor="move"),"boolean"==typeof mouse_over_key&&mouse_over_key&&(e.target.style.cursor="pointer"),obj&&"gantt"==obj.type&&obj.Get("chart.adjustable")&&(e.target.style.cursor=obj.getShape&&obj.getShape(e)?"ew-resize":"default"),obj&&"line"==obj.type&&obj.Get("chart.adjustable")&&(e.target.style.cursor=obj.getShape&&obj.getShape(e)?"ns-resize":"default"),e.target.__object__&&e.target.__object__.Get("chart.annotatable")&&(e.target.style.cursor="crosshair"),obj&&"drawing.text"===obj.type&&shape&&"string"==typeof obj.Get("link")&&(e.target.style.cursor="pointer")},RGraph.parseTooltipText=function(tooltips,idx){if(!tooltips)return null;if("function"==typeof tooltips)var text=tooltips(idx);else if("string"==typeof tooltips)var text=tooltips;else if("object"==typeof tooltips&&"function"==typeof tooltips[idx])var text=tooltips[idx](idx);else if("string"==typeof tooltips[idx]&&tooltips[idx])var text=tooltips[idx];else var text="";return"undefined"==text?text="":"null"==text&&(text=""),RGraph.getTooltipTextFromDIV?RGraph.getTooltipTextFromDIV(text):text},RGraph.DrawCrosshairs=function(e,obj){var e=RGraph.FixEventObject(e),width=obj.canvas.width,height=obj.canvas.height,mouseXY=RGraph.getMouseXY(e),x=mouseXY[0],y=mouseXY[1],gutterLeft=obj.gutterLeft,gutterRight=obj.gutterRight,gutterTop=obj.gutterTop,gutterBottom=obj.gutterBottom,prop=obj.properties;if(RGraph.RedrawCanvas(obj.canvas),x>=gutterLeft&&y>=gutterTop&&width-gutterRight>=x&&height-gutterBottom>=y){var linewidth=prop["chart.crosshairs.linewidth"]?prop["chart.crosshairs.linewidth"]:1;if(obj.context.lineWidth=linewidth?linewidth:1,obj.context.beginPath(),obj.context.strokeStyle=prop["chart.crosshairs.color"],prop["chart.crosshairs.snap"]){var point=null,dist=null,len=null;if("line"==obj.type){for(var i=0;i<obj.coords.length;++i){var len=RGraph.getHypLength(obj.coords[i][0],obj.coords[i][1],x,y);if("number"!=typeof dist||dist>len)var point=i,dist=len}x=obj.coords[point][0],y=obj.coords[point][1];for(var dataset=0;dataset<obj.coords2.length;++dataset)for(var point=0;point<obj.coords2[dataset].length;++point)obj.coords2[dataset][point][0]==x&&obj.coords2[dataset][point][1]==y&&(obj.canvas.__crosshairs_snap_dataset__=dataset,obj.canvas.__crosshairs_snap_point__=point)}else{for(var i=0;i<obj.coords.length;++i)for(var j=0;j<obj.coords[i].length;++j){var len=RGraph.getHypLength(obj.coords[i][j][0],obj.coords[i][j][1],x,y);if("number"!=typeof dist||dist>len)var dataset=i,point=j,dist=len}obj.canvas.__crosshairs_snap_dataset__=dataset,obj.canvas.__crosshairs_snap_point__=point,x=obj.coords[dataset][point][0],y=obj.coords[dataset][point][1]}}if(prop["chart.crosshairs.vline"]&&(obj.context.moveTo(Math.round(x),Math.round(gutterTop)),obj.context.lineTo(Math.round(x),Math.round(height-gutterBottom))),prop["chart.crosshairs.hline"]&&(obj.context.moveTo(Math.round(gutterLeft),Math.round(y)),obj.context.lineTo(Math.round(width-gutterRight),Math.round(y))),obj.context.stroke(),"scatter"==obj.type&&prop["chart.crosshairs.coords"]){var xCoord=(x-gutterLeft)/(width-gutterLeft-gutterRight)*(prop["chart.xmax"]-prop["chart.xmin"])+prop["chart.xmin"];xCoord=xCoord.toFixed(prop["chart.scale.decimals"]);var yCoord=obj.max-(y-prop["chart.gutter.top"])/(height-gutterTop-gutterBottom)*obj.max;"scatter"==obj.type&&"center"==obj.properties["chart.xaxispos"]&&(yCoord=2*(yCoord-obj.max/2)),yCoord=yCoord.toFixed(prop["chart.scale.decimals"]);var div=RGraph.Registry.Get("chart.coordinates.coords.div"),mouseXY=RGraph.getMouseXY(e),canvasXY=RGraph.getCanvasXY(obj.canvas);if(!div){var div=document.createElement("DIV");div.__object__=obj,div.style.position="absolute",div.style.backgroundColor="white",div.style.border="1px solid black",div.style.fontFamily="Arial, Verdana, sans-serif",div.style.fontSize="10pt",div.style.padding="2px",div.style.opacity=1,div.style.WebkitBorderRadius="3px",div.style.borderRadius="3px",div.style.MozBorderRadius="3px",document.body.appendChild(div),RGraph.Registry.Set("chart.coordinates.coords.div",div)}div.style.opacity=1,div.style.display="inline",prop["chart.crosshairs.coords.fixed"]?(div.style.left=canvasXY[0]+gutterLeft+3+"px",div.style.top=canvasXY[1]+gutterTop+3+"px"):(div.style.left=Math.max(2,e.pageX-div.offsetWidth-3)+"px",div.style.top=Math.max(2,e.pageY-div.offsetHeight-3)+"px"),div.innerHTML='<span style="color: #666">'+prop["chart.crosshairs.coords.labels.x"]+":</span> "+xCoord+'<br><span style="color: #666">'+prop["chart.crosshairs.coords.labels.y"]+":</span> "+yCoord,obj.canvas.addEventListener("mouseout",RGraph.HideCrosshairCoords,!1),obj.canvas.__crosshairs_labels__=div,obj.canvas.__crosshairs_x__=xCoord,obj.canvas.__crosshairs_y__=yCoord}else prop["chart.crosshairs.coords"]&&alert("[RGRAPH] Showing crosshair coordinates is only supported on the Scatter chart");RGraph.FireCustomEvent(obj,"oncrosshairs")}else RGraph.HideCrosshairCoords()};